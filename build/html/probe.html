

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2. Зонд &#8212; Документация Elecard Boro: Часто задаваемые вопросы </title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Алфавитный указатель" href="genindex.html" />
    <link rel="search" title="Поиск" href="search.html" />
    <link rel="prev" title="1. Технические требования" href="requirements.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             accesskey="I">указатель</a></li>
        <li class="right" >
          <a href="requirements.html" title="1. Технические требования"
             accesskey="P">назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация Elecard Boro: Часто задаваемые вопросы </a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Оглавление</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Зонд</a><ul>
<li><a class="reference internal" href="#linux-windows">2.1. Различия и ограничения Linux и Windows версий</a></li>
<li><a class="reference internal" href="#id2">2.2. Запуск и настройка зонда</a><ul>
<li><a class="reference internal" href="#q">2.2.1. Q: Как начать работать с системой мониторинга?</a></li>
<li><a class="reference internal" href="#id3">2.2.2. Q: Как запустить зонд в консоли?</a></li>
<li><a class="reference internal" href="#id4">2.2.3. Q: Как правильно остановить зонд, запущенный в консоли?</a></li>
<li><a class="reference internal" href="#id5">2.2.4. Q: Зонд не запускается</a></li>
<li><a class="reference internal" href="#id6">2.2.5. Q: Запуск и остановка зонда как служба (демон процесс)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">2.3. Обновление зонда</a><ul>
<li><a class="reference internal" href="#q-web">2.3.1. Q: Удаленное обновление зонда из web</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Предыдущий раздел</h4>
  <p class="topless"><a href="requirements.html"
                        title="предыдущая глава">1. Технические требования</a></p>
  <div role="note" aria-label="source link">
    <h3>Эта страница</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/probe.rst.txt"
            rel="nofollow">Исходный текст</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Быстрый поиск</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Искать" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>2. Зонд<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<div class="section" id="linux-windows">
<h2>2.1. Различия и ограничения Linux и Windows версий<a class="headerlink" href="#linux-windows" title="Ссылка на этот заголовок">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Свойство</th>
<th class="head">Linux</th>
<th class="head">Windows</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Вычисление Ethernet параметров(IAT/MLR/DF).</td>
<td>Зонд должен быть запущен с правами суперпользователя(sudo ./streamMonitor).</td>
<td>На компьютере, где запускается зонд, должна быть установлена библиотека захвата пакетов WinPcap (<a class="reference external" href="https://www.winpcap.org/install/">https://www.winpcap.org/install/</a>).</td>
</tr>
<tr class="row-odd"><td>Вычисление Ethernet параметров для localhost (127.0.0.1).</td>
<td>Ограничения нет.</td>
<td>Вычисление IAT для localhost невозможно.</td>
</tr>
<tr class="row-even"><td>Вычисление Ethernet параметров на основе меток времени, проставляемых сетевым адаптером. (Высокая точность вычисления IAT).</td>
<td>Поддерживается. Данный режим используется автоматически (если есть поддержка в адаптере). Подробнее в параграфе <a href="#id8"><span class="problematic" id="id9">`Вычисление Ethernet параметров`_</span></a>.</td>
<td>Не поддерживается.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h2>2.2. Запуск и настройка зонда<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<div class="section" id="q">
<h3>2.2.1. Q: Как начать работать с системой мониторинга?<a class="headerlink" href="#q" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>A:</strong> Необходимо знать несколько базовых вещей:</p>
<ol class="arabic simple">
<li>Система состоит из сервера мониторинга (находится в облаке) и клиентской части - зонда, который пользователь размещает в своей сети.</li>
<li>Пользователь самостоятельно выбирает аппаратное обеспечение для зонда.</li>
<li>Вам необходимо скачать архив зонда в личном кабинете. Обратите внимание, что пакет привязан к проекту в вашем кабинете. Это означает, что запущенный зонд будет отображать данные только в проекте, из которого он был загружен.</li>
<li>Следующим шагом необходимо запустить зонд и убедиться, что он появился в системе мониторинга (выпадающая левая панель в ЛК на сервисе boro.elecard.ru).</li>
<li>Следует знать, что можно запускать несколько зондов. Количество зондов фактически ограничивается количеством анализируемых потоков в приобретенной подписке.</li>
<li>Если требуется запуск нескольких зондов на одной машине, необходимо сделать копию всей папки зонда (например папки win64), так как приложения streamMonitor, запущенные из одной папки, будут иметь конкурирующий доступ к некоторым файлам!</li>
<li>Кроме этого, следует знать, что зонд не отправляет потоки на облачный сервер в каком-либо виде. Весь анализ проводится локально. На сервер отправляются статистические данные (величина битрейта, зарегистрированные ошибки), структура потока (PSI таблица), Closed Caption и SCTE35 данные и эскизы видеопрограмм.</li>
</ol>
</div>
<div class="section" id="id3">
<h3>2.2.2. Q: Как запустить зонд в консоли?<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>A:</strong> Для того, чтобы получить приложение, необходимо пройти несколько этапов. Более подробное описание можно найти в <strong>Руководстве по быстрому старту</strong>. Если вы скачали архив с приложением, для его запуска нужно осуществить следующие действия:</p>
<p><strong>Linux</strong></p>
<ol class="arabic">
<li><p class="first">Скопируйте скачанный архив зондов в необходимый каталог на Linux машине.</p>
</li>
<li><p class="first">При необходимости установите пакет <strong>unzip</strong>. Пример инсталляции на CentOs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">unzip</span>
</pre></div>
</div>
</li>
<li><p class="first">Перейдите в каталог с архивом зондов и разархивируйте его, пример распаковки с созданием директории Boro:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unzip</span> <span class="o">-</span><span class="n">d</span> <span class="o">./</span><span class="n">boro</span> <span class="n">ESenSay</span><span class="o">.</span><span class="mi">2016</span><span class="o">-</span><span class="n">v1</span><span class="o">.</span><span class="mi">00</span><span class="o">-</span><span class="mf">2016.11</span><span class="o">.</span><span class="mf">07.</span><span class="n">proj244</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
</li>
<li><p class="first">Зайдите в каталог, соответствующий разрядности и типу вашей ОС.</p>
</li>
<li><p class="first">В файле monitor.cfg отредактируйте поле «AppDescription» (задайте имя анализатору, которое будет отображаться в системе) и при необходимости задействуйте поле «proxy», убрав // перед строкой прокси сервера.</p>
</li>
<li><p class="first">Запустите анализатор в консоли:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">streamMonitor</span>
</pre></div>
</div>
<p>Необходимо использовать <strong>привилегии суперпользователя</strong> для снятия некоторых ограничений операционной системы и получения доступа к библиотеке захвата сетевых пакетов.</p>
</li>
<li><p class="first">В случае успешного запуска (зонд отображается в боковой панели личного кабинета зеленой точкой) все дальнейшие действия (запуск, редактирование и остановка задач) производятся при помощи браузера.</p>
</li>
<li><p class="first">Если зонд не запускается, обратитесь к параграфу <a class="reference internal" href="#id5">Q: Зонд не запускается</a>.</p>
</li>
</ol>
<p><strong>Windows</strong></p>
<ol class="arabic simple">
<li>Разархивируйте полученный файл в необходимую директорию.</li>
<li>Зайдите в папку, соответствующую разрядности и типу вашей ОС.</li>
<li>В файле monitor.cfg отредактируйте поле «AppDescription» (задайте имя анализатору, которое будет отображаться в системе) и при необходимости задействуйте поле «proxy», убрав // перед строкой прокси сервера.</li>
<li>Запустите анализатор <strong>«от администратора»</strong> (правый клик на файле streamMonitor.exe -&gt; Запуск от имени администратора). Должна запуститься консоль.</li>
<li>В случае успешного запуска (зонд отображается в боковой панели личного кабинета зеленой точкой) все дальнейшие действия (запуск, редактирование и остановка задач) производятся при помощи браузера.</li>
<li>Если зонд не запускается, обратитесь к параграфу <a class="reference internal" href="#id5">Q: Зонд не запускается</a>.</li>
</ol>
</div>
<div class="section" id="id4">
<h3>2.2.3. Q: Как правильно остановить зонд, запущенный в консоли?<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>A:</strong> Правильным методом является <strong>одинарное</strong> нажатие <strong>Ctrl+C</strong> в консоли, после этого необходимо ожидать корректного завершения работы зонда (до 1 минуты). Данный метод используется в Linux и Windows системах.</p>
<p>Если просто закрыть консоль, выполнение программы завершится некорректно, программа не будет иметь возможности передать на сервер команду остановки. Сервер будет ожидать отклик от некорректно завершенного зонда до 1 минуты, и только потом переведет задачи в состояние «завершенные» с пометкой «некорректно».</p>
</div>
<div class="section" id="id5">
<h3>2.2.4. Q: Зонд не запускается<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>A1:</strong> Нет связи с сервером. Для запуска зонда необходимо устойчивое Internet соединение, чтобы анализатор мог зарегистрироваться на сервере. После регистрации зонд устойчив к потере связи и использует буфер для накопления и дальнейшей передачи статистики.
Перечень возможных проблем с организацией связи до сервера:</p>
<ul class="simple">
<li>Неустойчивое Internet соединение (попробуйте повторный запуск);</li>
<li>Выход в Internet осуществляется через прокси сервер, но он не указан (указан неправильно) в файле <em>monitor.cfg</em>, либо строка в конфиге «закомментирована»;</li>
<li>Firewall (Brandmauer) ограничивает доступ приложения к сети. Решение данной проблемы описано в <a href="#id10"><span class="problematic" id="id11">`Q: Почему Boro «не видит мультикаст»`_</span></a> -&gt; <strong>A1: Firewall (Brandmauer)</strong>.</li>
</ul>
<p><strong>A2:</strong> В файле <em>monitor.cfg</em> были внесены правки, нарушающие формат .json, или добавлены данные, которые не соответствуют структуре данных, определенных в файле <em>monitor.cfg</em>. Кроме этого, <strong>файл monitor.cfg обязан сохраняться в utf-8</strong>. Обычно, при проблемах с конфигурационным файлом в лог консоли попадают сообщения об ошибках парсинга при запуске. Это первый признак проблем в файле <em>monitor.cfg</em>.
<strong>Решение проблемы:</strong></p>
<ul class="simple">
<li>Попытаться найти ошибки в файле (сложно для начинающих);</li>
<li>Скачать заново архив из личного кабинета и положить свежий неизмененный <em>monitor.cfg</em> в каталог, где производилась попытка запуска зонда. Однако, в таком случае, вы потеряете все настройки и список задач, сохраненные в <em>monitor.cfg</em> на момент последней остановки зонда. Необходимо заново задать имя зонда, при необходимости установить прокси сервер и поставить задачи запущенному зонду из web.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Рекомендуем пользоваться сохранением/загрузкой конфига на сервере, таким образом, вы избежите проблем с редактированием monitor.cfg, и у вас всегда будет backup конфигурации.</p>
</div>
<p>Подробную информацию о конфигурационном файле вы можете найти в разделе <a href="#id12"><span class="problematic" id="id13">`Конфигурационный файл`_</span></a>.</p>
<p><strong>A3:</strong> Возможно, в каталоге с приложением были удалены или повреждены некоторые библиотеки. Скачайте архив заново, подмените в свежем пакете файлы <em>monitor.cfg</em> и <em>authkey.pub</em> вашими файлами. Желательно скопировать скрытый файл <em>.stored.cache</em>, тогда не будет создано повторной записи с одинаковым именем зонда.</p>
<p><strong>A4:</strong> Возможно, вы пытаетесь запустить очень старую версию зонда. Попробуйте скачать свежую версию пакета зондов в личном кабинете, отредактируйте файл <em>monitor.cfg</em> и попробуйте запуск снова.</p>
<p><strong>A5:</strong> Используется устаревшая версия ОС Linux. Необходима поддержка glibc-2.11 и выше.</p>
</div>
<div class="section" id="id6">
<h3>2.2.5. Q: Запуск и остановка зонда как служба (демон процесс)<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>A1: служба в Widows</strong></p>
<p>Не поддерживается</p>
<p><strong>A2: Сервис в systemd (CentOs 7, Ubuntu 16.04)</strong></p>
<p>Полезные ссылки: <a class="reference external" href="https://habrahabr.ru/company/centosadmin/blog/255845/">https://habrahabr.ru/company/centosadmin/blog/255845/</a> (RU)
<a class="reference external" href="https://www.dynacont.net/documentation/linux/Useful_SystemD_commands/">https://www.dynacont.net/documentation/linux/Useful_SystemD_commands/</a> (EN)</p>
<ol class="arabic">
<li><p class="first">Создайте файл /etc/systemd/system/boro-client.service следующего содержания:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Unit</span><span class="p">]</span>
<span class="n">Description</span><span class="o">=</span><span class="n">boro</span> <span class="n">probe</span>
<span class="n">Documentation</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">boro</span><span class="o">.</span><span class="n">elecard</span><span class="o">.</span><span class="n">com</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">boro</span><span class="o">.</span><span class="n">elecard</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pdf</span><span class="o">/</span><span class="n">FAQ_en</span><span class="o">.</span><span class="n">pdf</span>
<span class="n">After</span><span class="o">=</span><span class="n">network</span><span class="o">-</span><span class="n">online</span><span class="o">.</span><span class="n">target</span>
<span class="n">Wants</span><span class="o">=</span><span class="n">network</span><span class="o">-</span><span class="n">online</span><span class="o">.</span><span class="n">target</span>


<span class="p">[</span><span class="n">Service</span><span class="p">]</span>
<span class="c1">#Type=simple</span>
<span class="n">User</span><span class="o">=</span><span class="n">root</span>
<span class="c1">#Group=root</span>
<span class="n">WorkingDirectory</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">boro</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">lin64</span>
<span class="n">ExecStart</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">boro</span><span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">lin64</span><span class="o">/</span><span class="n">streamMonitor</span>
<span class="n">PrivateTmp</span><span class="o">=</span><span class="n">false</span>
<span class="n">Restart</span><span class="o">=</span><span class="n">always</span>
<span class="n">RestartSec</span><span class="o">=</span><span class="mi">120</span><span class="n">s</span>

<span class="p">[</span><span class="n">Install</span><span class="p">]</span>
<span class="n">WantedBy</span><span class="o">=</span><span class="n">multi</span><span class="o">-</span><span class="n">user</span><span class="o">.</span><span class="n">target</span><span class="p">,</span>
</pre></div>
</div>
</li>
</ol>
<p>где необходимо правильно указать поля WorkingDirectory и ExecStart - директорию, в которой находится зонд, и путь до исполняемого файла, соответственно.</p>
<ol class="arabic" start="2">
<li><p class="first">Для проверки состояния сервиса необходимо выполнить следующую команду:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[user@localhost ~]$ systemctl -l status boro-client
boro-client.service - boro client
Loaded: loaded (/etc/systemd/system/boro-client.service; disabled; vendor preset: disabled)
Active: inactive (dead)
</pre></div>
</div>
<p>Выделенные поля говорят о том, что автозапуск не включен, и приложение не запущено.</p>
</li>
<li><p class="first">Для запуска демона необходимо выполнить команду:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">start</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
<p>Для остановки демона необходимо выполнить команду:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">stop</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Cледует понимать, что после перезапуска Linux, демон будет запущен вновь, если включен его автозапуск.</p>
</div>
<ol class="arabic" start="4">
<li><p class="first">Для разрешения автозапуска выполните команду:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">enable</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
<p>Для отключения автозапуска:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">disable</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
</li>
<li><p class="first">Проверьте состояние запущенного демона:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[user@localhost lin64]$ systemctl -l status boro-client
boro-client.service - boro client
Loaded: loaded (/etc/systemd/system/boro-client.service; enabled; vendor preset: disabled)
Active: active (running) since Tue 2017-03-28 16:01:35 +07; 2s ago
</pre></div>
</div>
<p>Выделенные поля указывают, на то, что демону разрешен автозапуск (enabled), и он сейчас запущен (Active: active (running)).</p>
</li>
</ol>
<p><strong>A3: Сервис в SysV (устаревшие дистрибутивы Linux)</strong></p>
<p>Полезные ссылки: <a class="reference external" href="https://www.opennet.ru/base/sys/run_services_tips.txt.html">https://www.opennet.ru/base/sys/run_services_tips.txt.html</a> (RU).</p>
<p>Необходимо сказать, что данная система запуска сервисов сохраняется как наследие в современных дистрибутивах. Также необходимо знать, что функции в скрипте запуска (/etc/rc.d/init.d/functions) могут иметь разные аргументы в зависимости от дистрибутива, ознакомьтесь с документацией системы инициализации сервисов вашего дистрибутива для корректировки скрипта.</p>
<p>В данном разделе рассмотрена реализация скрипта автоматического запуска для дистрибутива <strong>Linux CentOs 6.8</strong>. Документация на подготовку скрипта:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">doc</span><span class="o">/</span><span class="n">initscripts</span><span class="o">-*/</span><span class="n">sysvinitfiles</span><span class="o">.</span>
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">Перейдите в директорию /etc/rc.d/init.d</p>
</li>
<li><p class="first">Создайте файл boro-client (необходимы привилегии суперпользователя) со скриптом ниже. Будьте внимательны, создавая скрипт в Windows (CRLF), интерпретатор bash требует строгого соблюдения Linux стиля (только LF) переноса строк.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/sh
# chkconfig: - 98 02
# description: OTT and multicast probe.
# processname: BoroProbe

# Source function library.
if [ -f /etc/init.d/functions ] ; then
        . /etc/init.d/functions
elif [ -f /etc/rc.d/init.d/functions ] ; then
        . /etc/rc.d/init.d/functions
else
        exit 0
fi
KIND=&quot;Boro-probe&quot;
PROCPATH=&quot;/opt/boro/lin64&quot;

start() {
  echo -n $&quot;Starting $KIND services: &quot;
  daemon --check=streamMonitor $PROCPATH/streamMonitor &gt;/dev/null 2&gt;&amp;1 &amp;
  #daemon --check=streamMonitor $PROCPATH/streamMonitor &gt;$PROCPATH/proclog.log 2&gt;&amp;1 &amp;
  echo
}

stop() {
        echo -n $&quot;Shutting down $KIND services: &quot;
        killproc streamMonitor
        echo
}

restart() {
        echo -n $&quot;Restarting $KIND services: &quot;
                stop
                start
}

case &quot;$1&quot; in
        start)
                start
                ;;
        stop)
                stop
                ;;
        restart)
                restart
                ;;
        status)
                status streamMonitor
                ;;
        *)
                echo $&quot;Usage: $0 {start|stop|restart|status}&quot;
                exit 1
esac
exit $?
</pre></div>
</div>
</li>
<li><p class="first">В скрипте необходимо правильно задать переменную PROCPATH - путь до каталога с зондом.</p>
</li>
<li><p class="first">В скрипте необходимо выбрать, хотите ли вы сохранять лог процесса.
Лог не будет сохраняться:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>daemon --check=streamMonitor $PROCPATH/streamMonitor &gt;/dev/null 2&gt;&amp;1 &amp;
#daemon --check=streamMonitor $PROCPATH/streamMonitor &gt;$PROCPATH/proclog.log 2&gt;&amp;1
</pre></div>
</div>
<p>Лог будет сохраняться в файл proclog.log в папке с зондом:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#daemon --check=streamMonitor $PROCPATH/streamMonitor &gt;/dev/null 2&gt;&amp;1 &amp;
daemon --check=streamMonitor $PROCPATH/streamMonitor &gt;$PROCPATH/proclog.log 2&gt;&amp;1
</pre></div>
</div>
</li>
<li><p class="first">Сохраните изменения в файле  boro-client.</p>
</li>
<li><p class="first">Необходимо назначить права на исполнение для скрипта (необходимы привилегии суперпользователя): chmod 755 /etc/rc.d/init.d/boro-client</p>
</li>
<li><p class="first">Добавляем скрипт в систему запуска:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chkconfig</span> <span class="o">--</span><span class="n">add</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span>
</pre></div>
</div>
</li>
<li><p class="first">Включаем автостарт сервиса:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chkconfig</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span> <span class="n">on</span>
</pre></div>
</div>
</li>
<li><p class="first">После перезагрузки анализатор будет автоматически запущен как сервис. Для сервиса можно проверить статус, запустить и остановить его “вручную” следующими командами, находясь в директории /etc/rc.d/init.d:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">boro</span><span class="o">-</span><span class="n">client</span> <span class="n">status</span>
<span class="o">./</span><span class="n">boro</span><span class="o">-</span><span class="n">client</span> <span class="n">start</span>
<span class="o">./</span><span class="n">boro</span><span class="o">-</span><span class="n">client</span> <span class="n">stop</span>
</pre></div>
</div>
</li>
</ol>
<p>Список установленных сервисов в системе и их статус можно проверить командой:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chkconfig</span> <span class="o">--</span><span class="nb">list</span><span class="o">.</span>
</pre></div>
</div>
<p>Автозапуск сервиса можно отключить командой:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chkconfig</span> <span class="n">boro</span><span class="o">-</span><span class="n">client</span> <span class="n">off</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id7">
<h2>2.3. Обновление зонда<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h2>
<p>Существует два способа обновления зонда:</p>
<ul class="simple">
<li>web обновление командой из личного кабинета;</li>
<li>из командной строки.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">При обновлении все настройки и задачи зонда сохраняются. Однако, компания Elecard рекомендует произвести сохранение конфигурации на сервере или создать копию конфигурационного файла monitor.cfg непосредственно перед обновлением зонда.</p>
</div>
<div class="section" id="q-web">
<h3>2.3.1. Q: Удаленное обновление зонда из web<a class="headerlink" href="#q-web" title="Ссылка на этот заголовок">¶</a></h3>
<p><strong>A:</strong> Запустите ваш текущий зонд/зонды и перейдите на страницу настройки зонда, кликнув на соответствующее имя зонда в боковой выпадающей панели.</p>
<p>На рисунке ниже видно, что есть обновление для запущенного зонда (голубая ссылка <strong>Update to/Обновить</strong> с номером обновления). Необходимо нажать на данную ссылку.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             >указатель</a></li>
        <li class="right" >
          <a href="requirements.html" title="1. Технические требования"
             >назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация Elecard Boro: Часто задаваемые вопросы </a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Elecard.
      Создано с помощью <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.3.
    </div>
  </body>
</html>